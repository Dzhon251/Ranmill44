<div class="card shadow-6">
    <h2 class="card-title flex justify-content-center">
        <strong>Dashboard de la Gestión de alimentos del GAE 44 "Pastaza"</strong>
    </h2>
    <div class="dashboard-container">
        <header class="flex justify-content-evenly flex-wrap">
            <div class="month-selector">
                <label for="month-select">Seleccionar Mes:</label>
                <select id="month-select" [value]="selectedMonth" (change)="onMonthChange($event)">
                    <option *ngFor="let month of months" [value]="month.value">
                        {{ month.name }}
                    </option>
                </select>
            </div>
        </header>

        <div class="cards-container flex gap-3">
            <app-meal-card class="flex-1" type="breakfast" title="Desayuno" [value]="'$' + PRICES.breakfast.toFixed(2)">
            </app-meal-card>

            <app-meal-card class="flex-1" type="lunch" title="Almuerzo" [value]="'$' + PRICES.lunch.toFixed(2)">
            </app-meal-card>

            <app-meal-card class="flex-1" type="dinner" title="Merienda" [value]="'$' + PRICES.dinner.toFixed(2)">
            </app-meal-card>

            <app-meal-card class="flex-1" type="revenue" title="Valores Recaudados"
                [value]="'$' + (currentData?.totals?.revenue?.toFixed(2) ?? '0.00')">
            </app-meal-card>
        </div>


        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-title">Consumo de Comidas por Día</div>
                <div class="chart-container">
                    <canvas #areaChart></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-title">Distribución de Comidas</div>
                <div class="chart-container">
                    <canvas #pieChart></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-title">Desperdicios Registrados</div>
                <div class="chart-container">
                    <canvas #doughnutChart></canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="showCostAnalysis">
                <div class="chart-title">Análisis de Costos y Ganancia</div>
                <div class="chart-container">
                    <canvas #barChart></canvas>
                </div>
            </div>
        </div>



        <div class="stats-summary" *ngIf="currentData">
            <div class="stats-title">Resumen del Mes</div>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Total Desayunos:</span>
                    <span class="stat-value">{{ currentData.totals.breakfast }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Almuerzos:</span>
                    <span class="stat-value">{{ currentData.totals.lunch }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Meriendas:</span>
                    <span class="stat-value">{{ currentData.totals.dinner }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Desperdicios:</span>
                    <span class="stat-value">{{ currentData.totals.waste }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Días del mes:</span>
                    <span class="stat-value">{{ currentData.daysInMonth }}</span>
                </div>
                <!-- <div class="stat-item">
                <span class="stat-label">Promedio diario:</span>
                <span class="stat-value">{{ dailyAverage }}</span>
            </div> -->
            </div>
        </div>
    </div>
</div>